<!-- COMPONENTE HEADER -->
<header class="header">
  <h1>POEMS BLOG / PERFIL DE USUARIO</h1>
</header>

<div class="container-fluid d-flex">
  <!-- Sidebar con perfil -->
  <div class="profile-box p-4 text-center">
    <div class="user-avatar mx-auto">
      <img [src]="selectedUser.image_url" alt="Imagen de perfil" class="rounded-circle">
    </div>
    <h3 class="profile-name mt-3">{{ selectedUser.username || 'Usuario' }}</h3>
    <p class="profile-bio">{{ selectedUser.description || 'No hay biografÃ­a disponible.' }}</p>
  </div>

  <!-- Contenido principal -->
  <div class="content flex-grow-1 p-4" style="background-color: #f8f9fa; border-radius: 10px; padding: 20px;">
    <!-- Barra de bÃºsqueda -->
    <div class="search-bar mb-3">
      <input type="text" class="form-control search-input" placeholder="BUSCAR POEMAS" (input)="onSearch($event)">
    </div>

    <!-- Botones de selecciÃ³n con contador de ratings -->
    <div class="btn-group w-100">
      <button class="btn btn-toggle" [class.active]="viewing === 'poems'" (click)="viewPoems()">POEMAS<span class="badge bg-dark ms-2">{{ poems.length }}</span></button>
      <button class="btn btn-toggle position-relative" [class.active]="viewing === 'ratings'" (click)="viewRatings()">
        RATINGS <span class="badge bg-dark ms-2">{{ ratings.length }}</span>
      </button>
    </div>

    <!-- SecciÃ³n de Poemas -->
    <div *ngIf="viewing === 'poems'" class="poems-section mt-3">
      <div class="row g-3">
        <div class="col-md-6" *ngFor="let poem of poems">
          <div class="poem-card bg-white p-3 border rounded">
            <h5>{{ poem.title }}</h5>
            <p>{{ poem.description }}</p>
            <p class="text-muted">Autor: {{ selectedUser.username }}</p>
            <p class="text-muted">Creado: {{ poem.date_created | date:'dd/MM/yyyy' }}</p>
            <div class="actions">
              <i class="fas fa-edit" (click)="openEditPoemModal(poem)"></i>
              <i class="fas fa-trash text-danger" (click)="confirmDeletePoem(poem.id)"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SecciÃ³n de Ratings -->
    <div *ngIf="viewing === 'ratings'" class="ratings-section mt-3">
      <div class="row g-3">
        <div class="col-md-6" *ngFor="let rating of ratings">
          <div class="rating-card bg-white p-3 border rounded">
            <h5>ðŸŒŸ {{ rating.stars }}</h5>
            <p>{{ rating.comment }}</p>
            <p class="text-muted">Poema ID: {{ rating.poem_id }}</p>
            <p class="text-muted">Fecha: {{ rating.date_created | date:'short' }}</p>
            <div class="actions">
              <i class="fas fa-edit" (click)="openEditRatingModal(rating)"></i>
              <i class="fas fa-trash text-danger" (click)="confirmDeleteRating(rating.id)"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- COMPONENTE FOOTER -->
<footer class="footer">
  <p>&copy;2024 POEMS BLOG / EL LUGAR DONDE LAS PALABRAS COBRAN VIDA.</p>
</footer>